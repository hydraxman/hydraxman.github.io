

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">

  <link rel="apple-touch-icon" sizes="76x76" href="/images/favicon.svg">
  <link rel="icon" href="/images/favicon.svg">
  

  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#ffffff">
  <meta name="author" content="Nathan">
  <meta name="keywords" content="计算机技术, 生活中的胡思乱想">
  
    <meta name="description" content="What is AOP?​In computing, aspect-oriented programming (AOP) is a programming paradigm that aims to increase modularity by allowing the separation of cross-cutting concerns. It does so by adding addit">
<meta property="og:type" content="article">
<meta property="og:title" content="Aspect-Oriented Programming in Android">
<meta property="og:url" content="https://hydraxman.github.io/2018/12/27/aop-in-android/index.html">
<meta property="og:site_name" content="内森淼文">
<meta property="og:description" content="What is AOP?​In computing, aspect-oriented programming (AOP) is a programming paradigm that aims to increase modularity by allowing the separation of cross-cutting concerns. It does so by adding addit">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://hydraxman.github.io/2018/12/27/aop-in-android/1.png">
<meta property="og:image" content="https://hydraxman.github.io/2018/12/27/aop-in-android/2.jpg">
<meta property="article:published_time" content="2018-12-27T01:04:34.000Z">
<meta property="article:modified_time" content="2026-02-20T09:22:12.119Z">
<meta property="article:author" content="Nathan">
<meta property="article:tag" content="Android">
<meta property="article:tag" content="AOP">
<meta property="article:tag" content="面向切面">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://hydraxman.github.io/2018/12/27/aop-in-android/1.png">
  
  
  
  <title>Aspect-Oriented Programming in Android - 内森淼文</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/c/font_1749284_5i9bdhy70f8.css">



<link rel="stylesheet" href="//at.alicdn.com/t/c/font_1736178_k526ubmyhba.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"hydraxman.github.io","root":"/","version":"1.9.8","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":true,"scope":["home"]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#2979FF","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"follow_dnt":true,"baidu":null,"google":{"measurement_id":null},"tencent":{"sid":null,"cid":null},"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false},"umami":{"src":null,"website_id":null,"domains":null,"start_time":"2024-01-01T00:00:00.000Z","token":null,"api_server":null}},"search_path":"/local-search.xml","include_content_in_search":true};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  


  
<meta name="generator" content="Hexo 6.3.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 60vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>内森淼文</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/" target="_self">
                <i class="iconfont icon-home-fill"></i>
                <span>首页</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/" target="_self">
                <i class="iconfont icon-archive-fill"></i>
                <span>归档</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/" target="_self">
                <i class="iconfont icon-category-fill"></i>
                <span>分类</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/" target="_self">
                <i class="iconfont icon-tags-fill"></i>
                <span>标签</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/" target="_self">
                <i class="iconfont icon-user-fill"></i>
                <span>关于</span>
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              <i class="iconfont icon-search"></i>
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">
              <i class="iconfont icon-dark" id="color-toggle-icon"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/images/banner-dark.jpg') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.4)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle">Aspect-Oriented Programming in Android</span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2018-12-27 09:04" pubdate>
          2018年12月27日 上午
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          154 字
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          2 分钟
        
      </span>
    

    
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar category-bar" style="margin-right: -1rem">
    





<div class="category-list">
  
  
    
    
    
    <div class="category row nomargin-x">
      <a class="category-item 
          list-group-item category-item-action col-10 col-md-11 col-xm-11" title="代码手记"
        id="heading-744bc9f0692e342d19e268f9ad8ff775" role="tab" data-toggle="collapse" href="#collapse-744bc9f0692e342d19e268f9ad8ff775"
        aria-expanded="true"
      >
        代码手记
        <span class="list-group-count">(11)</span>
        <i class="iconfont icon-arrowright"></i>
      </a>
      
      <div class="category-collapse collapse show" id="collapse-744bc9f0692e342d19e268f9ad8ff775"
           role="tabpanel" aria-labelledby="heading-744bc9f0692e342d19e268f9ad8ff775">
        
        
          
  <div class="category-post-list">
    
    
      
      
        <a href="/2022/11/01/what-is-good-code/" title="什么是好代码？"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">什么是好代码？</span>
        </a>
      
    
      
      
        <a href="/2022/11/01/plantuml-get-started/" title="PlantUML指北：用UML设计和规划你的项目"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">PlantUML指北：用UML设计和规划你的项目</span>
        </a>
      
    
      
      
        <a href="/2022/11/01/the-nature-of-code/" title="编程的本质"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">编程的本质</span>
        </a>
      
    
      
      
        <a href="/2022/10/15/design-patterns-all-in-one/" title="15分钟入门23种设计模式：图解，范例和对比"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">15分钟入门23种设计模式：图解，范例和对比</span>
        </a>
      
    
      
      
        <a href="/2018/12/31/more-about-java-bytecode-and-aop/" title="Java bytecode and AOP"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">Java bytecode and AOP</span>
        </a>
      
    
      
      
        <a href="/2018/12/27/aop-in-android/" title="Aspect-Oriented Programming in Android"
           class="list-group-item list-group-item-action
           active">
          <span class="category-post">Aspect-Oriented Programming in Android</span>
        </a>
      
    
      
      
        <a href="/2018/07/13/java-calendar-story/" title="代码中的人文故事：从一个Java的“Bug”说起"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">代码中的人文故事：从一个Java的“Bug”说起</span>
        </a>
      
    
      
      
        <a href="/2017/03/11/jvm-classcode-practice/" title="一次Java字节码插桩实战"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">一次Java字节码插桩实战</span>
        </a>
      
    
      
      
        <a href="/2017/03/07/jvm-classcode-tutorial/" title="白话Java字节码指令"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">白话Java字节码指令</span>
        </a>
      
    
      
      
        <a href="/2017/02/26/java-classcode-edit-toolkit/" title="Java字节码修改神器HiBeaver：黑掉你的SDK"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">Java字节码修改神器HiBeaver：黑掉你的SDK</span>
        </a>
      
    
      
      
        <a href="/2017/02/06/gradle-debug-tips/" title="Gradle插件开发秘籍之断点调试（基于Intellij）"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">Gradle插件开发秘籍之断点调试（基于Intellij）</span>
        </a>
      
    
  </div>

        
      </div>
    </div>
  
</div>


  </aside>


    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <h1 id="seo-header">Aspect-Oriented Programming in Android</h1>
            
            
              <div class="markdown-body">
                
                <h2 id="What-is-AOP-​"><a href="#What-is-AOP-​" class="headerlink" title="What is AOP?​"></a>What is AOP?​</h2><p>In computing, aspect-oriented programming (AOP) is a programming paradigm that aims to increase modularity by allowing the separation of cross-cutting concerns. It does so by adding additional behavior to existing code (an advice) without modifying the code itself, instead separately specifying which code is modified via a “pointcut” specification, such as “log all function calls when the function’s name begins with ‘set’”. This allows behaviors that are not central to the business logic (such as logging) to be added to a program without cluttering the code, core to the functionality. AOP forms a basis for aspect-oriented software development.</p>
<span id="more"></span>

<p>The Microsoft Transaction Server is considered to be the first major application of AOP followed by Enterprise JavaBeans.​</p>
<h3 id="Similar-concepts"><a href="#Similar-concepts" class="headerlink" title="Similar concepts:"></a>Similar concepts:</h3><ul>
<li>Proxy pattern</li>
<li>Interceptors &amp; Filters</li>
<li>Basic terminology:</li>
</ul>
<h3 id="Concerns"><a href="#Concerns" class="headerlink" title="Concerns"></a>Concerns</h3><p>Advice, Pointcut and Join Point compose an Aspect:​</p>
<ul>
<li>Primary concerns</li>
<li>Secondary and Cross-cutting concerns</li>
<li>Joint point</li>
<li>Advice</li>
<li>Pointcut<ul>
<li>Described by expressions: AspectJ Pointcut expressions</li>
<li>Described by annotations</li>
</ul>
</li>
<li>Aspect</li>
<li>Weaving</li>
<li>AOP processor i.e. the Weaver</li>
</ul>
<p><img src="/2018/12/27/aop-in-android/1.png" srcset="/img/loading.gif" lazyload alt="Concepts"></p>
<h4 id="Weaving-timing"><a href="#Weaving-timing" class="headerlink" title="Weaving timing:"></a>Weaving timing:</h4><ul>
<li>At run-time</li>
<li>At load-time</li>
<li>At compile-time</li>
</ul>
<h2 id="Why-do-we-need-AOP"><a href="#Why-do-we-need-AOP" class="headerlink" title="Why do we need AOP?"></a>Why do we need AOP?</h2><p>In a word, AOP is an evolution and supplement of OOP</p>
<p><img src="/2018/12/27/aop-in-android/2.jpg" srcset="/img/loading.gif" lazyload alt="AOP as a supplement"></p>
<p>General Benefits:</p>
<ul>
<li>Increase modularity and logic clarity and concentration</li>
<li>Less tangled code</li>
<li>Shorter code</li>
<li>Easier application maintenance and evolution</li>
<li>Applications that are easier to debug, refactor and modify</li>
<li>Code is more reusable in a shape of aspect</li>
<li>An idea of resolving complicated process</li>
<li>Application of the implementation: help to hook and inject third-party SDKs (So as to block malicious method calls or to monitor or study crucial process, like network communication)</li>
</ul>
<blockquote>
<p>Mastering AspectJ: Aspect-Oriented Programming in Java,  Joseph Gradecki, Nicholas. WILEY</p>
</blockquote>
<p>Practice Areas:</p>
<ul>
<li>Logging</li>
<li>Permission check</li>
<li>Performance Profiling</li>
<li>Data check</li>
<li>Thread status check</li>
</ul>
<h2 id="How-to-adopt-it"><a href="#How-to-adopt-it" class="headerlink" title="How to adopt it?"></a>How to adopt it?</h2><table>
<thead>
<tr>
<th>AOP Core Implementation</th>
<th>Basic Techniques</th>
<th>Weaving time</th>
</tr>
</thead>
<tbody><tr>
<td>Dynamic Proxy Pattern</td>
<td>Java Proxy API</td>
<td>Run-time</td>
</tr>
<tr>
<td>DexMaker</td>
<td>DexClassLoader API</td>
<td>Load-time</td>
</tr>
<tr>
<td>AspectJ</td>
<td>Java Bytecode Manipulation</td>
<td>Compile-time</td>
</tr>
</tbody></table>
<blockquote>
<p>AspectJ: AOP standard extension, the open-source projects Maintained by Eclipse Foundation </p>
</blockquote>
<p><a target="_blank" rel="noopener" href="https://git.eclipse.org/c/aspectj/org.aspectj.git/">https://git.eclipse.org/c/aspectj/org.aspectj.git/</a></p>
<h2 id="Dark-side-True-Magic-or-Fancy-Stuff"><a href="#Dark-side-True-Magic-or-Fancy-Stuff" class="headerlink" title="Dark side: True Magic or Fancy Stuff?"></a>Dark side: True Magic or Fancy Stuff?</h2><p>“AOP considered harmful”:</p>
<p>Makes control flow obscured: Implicit AOP to Explicit AOP<br>Affect method stack trace: increase its depth<br>Require additional weaving time</p>
<blockquote>
<p>“AOP Considered Harmful”. uni-karlsruhe.de. 23 March 2016.</p>
</blockquote>
<p>Mitigation:</p>
<ul>
<li>prevent invisible code, better use Annotation and combine with DI technique</li>
<li>Appropriate use: it’s only a supplement and a way to simplify complicated structure and reuse components, not a software design principle.</li>
</ul>
<h2 id="More-about-AspectJ"><a href="#More-about-AspectJ" class="headerlink" title="More about AspectJ"></a>More about AspectJ</h2><p>Pointcut expression:</p>
<figure class="highlight coq"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs coq">execution(modifiers-<span class="hljs-built_in">pattern</span>? ret-type-<span class="hljs-built_in">pattern</span> declaring-type-<span class="hljs-built_in">pattern</span>? name-<span class="hljs-built_in">pattern</span>(param-<span class="hljs-built_in">pattern</span>) throws-<span class="hljs-built_in">pattern</span>?)<br></code></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://docs.spring.io/spring/docs/2.0.x/reference/aop.html">https://docs.spring.io/spring/docs/2.0.x/reference/aop.html</a></p>
<p><a target="_blank" rel="noopener" href="https://howtodoinjava.com/spring-aop/aspectj-pointcut-expressions/">https://howtodoinjava.com/spring-aop/aspectj-pointcut-expressions/</a></p>
<p>As the return value is ignored, the method must be declared as void return.</p>
<p>Pointcut described by annotation:</p>
<p>Annotated Joint Point: the primary concern.</p>
<p>Check log outputs:</p>
<p>Other Possible Scenarios:</p>
<ul>
<li>@ProfilerTracker(BuildConfig.DEBUG)</li>
<li>@CallFrequencyLimit</li>
<li>@CheckPermission(“”), @RequirePermission(“”)</li>
</ul>
<p>How does it work? Technique Anatomy:​​​​​​​​​​​​​​<br>Weaving in Build-time:</p>
<p>Next session: Java Bytecode manipulation.</p>
<p>Other implementations:</p>
<ul>
<li>Based on the idea of AOP and DI (Dependency Injection), lots of Android opensource frameworks are created to help improve the code structure and modularity.</li>
</ul>
<p><a target="_blank" rel="noopener" href="https://github.com/androidannotations/androidannotations">AndroidAnnotations</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/JakeWharton/hugo">Hugo</a></p>
<p>OTHER REFERENCES<br><a target="_blank" rel="noopener" href="https://fernandocejas.com/2014/08/03/aspect-oriented-programming-in-android/">https://fernandocejas.com/2014/08/03/aspect-oriented-programming-in-android/</a></p>

                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/%E4%BB%A3%E7%A0%81%E6%89%8B%E8%AE%B0/" class="category-chain-item">代码手记</a>
  
  

      </span>
    
  
</span>

    </div>
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/tags/Android/" class="print-no-link">#Android</a>
      
        <a href="/tags/AOP/" class="print-no-link">#AOP</a>
      
        <a href="/tags/%E9%9D%A2%E5%90%91%E5%88%87%E9%9D%A2/" class="print-no-link">#面向切面</a>
      
    </div>
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>Aspect-Oriented Programming in Android</div>
      <div>https://hydraxman.github.io/2018/12/27/aop-in-android/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>作者</div>
          <div>Nathan</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>发布于</div>
          <div>2018年12月27日</div>
        </div>
      
      
      
        <div class="license-meta-item">
          <div>许可协议</div>
          <div>
            
              
              
                <a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">
                  <span class="hint--top hint--rounded" aria-label="BY - 署名">
                    <i class="iconfont icon-cc-by"></i>
                  </span>
                </a>
              
                <a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">
                  <span class="hint--top hint--rounded" aria-label="NC - 非商业性使用">
                    <i class="iconfont icon-cc-nc"></i>
                  </span>
                </a>
              
                <a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">
                  <span class="hint--top hint--rounded" aria-label="SA - 相同方式共享">
                    <i class="iconfont icon-cc-sa"></i>
                  </span>
                </a>
              
            
          </div>
        </div>
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2018/12/31/more-about-java-bytecode-and-aop/" title="Java bytecode and AOP">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">Java bytecode and AOP</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2018/07/13/java-calendar-story/" title="代码中的人文故事：从一个Java的“Bug”说起">
                        <span class="hidden-mobile">代码中的人文故事：从一个Java的“Bug”说起</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header">
    <i class="iconfont icon-list"></i>
    <span>目录</span>
  </p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  



  <script>
  Fluid.utils.createScript('https://lib.baomitu.com/mermaid/8.14.0/mermaid.min.js', function() {
    mermaid.initialize({"theme":"default"});

    Fluid.utils.listenDOMLoaded(function() {
      Fluid.events.registerRefreshCallback(function() {
        if ('mermaid' in window) {
          mermaid.init();
        }
      });
    });
  });
</script>






    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> <br> <span>© 2024 - 2026 内森淼文</span> 
    </div>
  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.4/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>





  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.20.1/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/5.0.0/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/js/local-search.js" ></script>





<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div>
  </noscript>
</body>
</html>
